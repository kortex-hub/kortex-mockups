<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kortex - Knowledge Details</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <script src="../assets/js/sidebar-loader.js"></script>
    <style>
        /* Knowledge Details Specific Styles */
        .details-view {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .details-header {
            margin-bottom: 0;
            padding: 16px 24px;
            border-bottom: 1px solid #3d3e4f;
            background-color: #252631;
            position: relative;
        }

        .close-button {
            position: absolute;
            top: 16px;
            right: 24px;
            background-color: transparent;
            border: none;
            color: #9ca3af;
            cursor: pointer;
            padding: 8px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .close-button:hover {
            color: #e5e7eb;
            background-color: #374151;
        }

        .breadcrumb-nav {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            font-size: 14px;
        }

        .breadcrumb-link {
            color: #8b5cf6;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .breadcrumb-link:hover {
            color: #a78bfa;
        }

        .breadcrumb-separator {
            color: #6b7280;
        }

        .breadcrumb-current {
            color: #e5e7eb;
        }

        .environment-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .environment-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .environment-icon {
            width: 32px;
            height: 32px;
            background-color: #374151;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            transition: color 0.2s ease;
        }

        .environment-icon.running {
            color: #10b981;
        }

        .environment-icon.stopped {
            color: #6b7280;
        }

        .environment-details h2 {
            font-size: 18px;
            font-weight: 600;
            color: #e5e7eb;
            margin: 0 0 4px 0;
        }

        .environment-subtitle {
            font-size: 12px;
            color: #9ca3af;
        }

        .environment-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .header-action-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 6px;
            background-color: #374151;
            color: #9ca3af;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .header-action-button:hover {
            background-color: #4b5563;
            color: #e5e7eb;
        }

        .header-action-button.primary {
            background-color: #8b5cf6;
            color: #ffffff;
        }

        .header-action-button.primary:hover {
            background-color: #7c3aed;
        }

        .header-action-button.danger:hover {
            background-color: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }

        .details-tabs {
            display: flex;
            border-bottom: 1px solid #3d3e4f;
            margin-bottom: 32px;
            padding: 0 24px;
        }

        .details-tab {
            padding: 12px 16px;
            color: #9ca3af;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            border-bottom: 2px solid transparent;
            transition: all 0.2s ease;
        }

        .details-tab:hover {
            color: #e5e7eb;
        }

        .details-tab.active {
            color: #ffffff;
            border-bottom-color: #8b5cf6;
        }

        .tab-content {
            display: none;
            padding: 0 24px 24px;
        }

        .tab-content.active {
            display: block;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .info-card {
            background-color: #252631;
            border: 1px solid #3d3e4f;
            border-radius: 8px;
            padding: 20px;
        }

        .info-card-title {
            font-size: 14px;
            font-weight: 600;
            color: #9ca3af;
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #3d3e4f;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            font-size: 14px;
            color: #9ca3af;
        }

        .info-value {
            font-size: 14px;
            color: #e5e7eb;
            font-weight: 500;
        }

        .upload-area {
            border: 2px dashed #3d3e4f;
            border-radius: 8px;
            padding: 48px 24px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 24px;
        }

        .upload-area:hover {
            border-color: #8b5cf6;
            background-color: rgba(139, 92, 246, 0.05);
        }

        .upload-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 16px;
            color: #9ca3af;
        }

        .upload-text {
            font-size: 16px;
            color: #e5e7eb;
            margin-bottom: 8px;
        }

        .upload-subtext {
            font-size: 14px;
            color: #9ca3af;
        }

        .sources-list {
            background-color: #252631;
            border: 1px solid #3d3e4f;
            border-radius: 8px;
            overflow: hidden;
        }

        .sources-header {
            padding: 16px 20px;
            border-bottom: 1px solid #3d3e4f;
            background-color: #1e1f29;
        }

        .sources-title {
            font-size: 16px;
            font-weight: 600;
            color: #e5e7eb;
        }

        .source-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            border-bottom: 1px solid #3d3e4f;
            transition: background-color 0.2s ease;
        }

        .source-item:hover {
            background-color: #2d2e3f;
        }

        .source-item:last-child {
            border-bottom: none;
        }

        .source-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .file-icon {
            width: 32px;
            height: 32px;
            background-color: #374151;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
        }

        .source-details h4 {
            font-size: 14px;
            font-weight: 500;
            color: #e5e7eb;
            margin: 0 0 4px 0;
        }

        .source-meta {
            font-size: 12px;
            color: #9ca3af;
        }

        .source-actions {
            display: flex;
            gap: 8px;
        }

        .source-action {
            width: 28px;
            height: 28px;
            border: none;
            border-radius: 4px;
            background-color: transparent;
            color: #9ca3af;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .source-action:hover {
            background-color: #374151;
            color: #e5e7eb;
        }

        .source-action.delete:hover {
            background-color: rgba(239, 68, 68, 0.1);
            color: #ef4444;
        }
    </style>
</head>
<body class="knowledges-page">
    <div class="app-container">
        <!-- Sidebar will be loaded here -->
        <div id="sidebar-container"></div>

        <!-- Knowledge Details View -->
        <main class="main-content details-view">
            <header class="header">
                <h1>Knowledges</h1>
            </header>
            
            <div class="content">
                <!-- Details Header -->
                <div class="details-header">
                    <!-- Close Button -->
                    <button class="close-button" onclick="window.location.href='index.html'" title="Close">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                    
                    <!-- Breadcrumb Navigation -->
                    <div class="breadcrumb-nav">
                        <a href="index.html" class="breadcrumb-link">Knowledges</a>
                        <span class="breadcrumb-separator">></span>
                        <span class="breadcrumb-current">Knowledge Details</span>
                    </div>
                    
                    <!-- Environment Header -->
                    <div class="environment-header">
                        <div class="environment-info">
                            <div class="environment-icon running" id="environmentIcon">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <polyline points="14,2 14,8 20,8"/>
                                    <line x1="16" y1="13" x2="8" y2="13"/>
                                    <line x1="16" y1="17" x2="8" y2="17"/>
                                    <polyline points="10,9 9,9 8,9"/>
                                </svg>
                            </div>
                            <div class="environment-details">
                                <h2 id="environmentTitle">podman-knowledges</h2>
                                <div class="environment-subtitle" id="environmentSubtitle">
                                    <span id="environmentStatus">Running</span> • <span id="environmentConfig">Milvus + Docling</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="environment-actions">
                            <button class="header-action-button primary" id="headerStartStop" title="Stop">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                    <rect x="6" y="6" width="12" height="12" rx="2"/>
                                </svg>
                            </button>
                            <button class="header-action-button danger" title="Delete">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <polyline points="3,6 5,6 21,6"/>
                                    <path d="M19,6v14a2,2 0,0,1-2,2H7a2,2 0,0,1-2-2V6m3,0V4a2,2 0,0,1,2-2h4a2,2 0,0,1,2,2v2"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="details-tabs">
                    <a href="#" class="details-tab active" onclick="showTab('summary'); return false;">Summary</a>
                    <a href="#" class="details-tab" onclick="showTab('sources'); return false;">Sources</a>
                    <a href="#" class="details-tab" onclick="showTab('vectorstore'); return false;">VectorStore</a>
                    <a href="#" class="details-tab" onclick="showTab('chunker'); return false;">Chunker</a>
                </div>

                <!-- Tab Content: Summary -->
                <div id="summaryTab" class="tab-content active">
                    <div class="summary-grid">
                        <div class="info-card">
                            <h3 class="info-card-title">General Information</h3>
                            <div class="info-row">
                                <span class="info-label">Name</span>
                                <span class="info-value" id="summaryName">podman-knowledges</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Status</span>
                                <span class="info-value" id="summaryStatus">Running</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Created</span>
                                <span class="info-value">2 days ago</span>
                            </div>
                        </div>

                        <div class="info-card">
                            <h3 class="info-card-title">Configuration</h3>
                            <div class="info-row">
                                <span class="info-label">Vector Store</span>
                                <span class="info-value" id="summaryVectorStore">Milvus</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Embedding Model</span>
                                <span class="info-value" id="summaryChunker">Docling</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Source Files</span>
                                <span class="info-value" id="summarySources">23 files</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Sources -->
                <div id="sourcesTab" class="tab-content">
                    <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                        <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        <div class="upload-text">Drop files here or click to upload</div>
                        <div class="upload-subtext">Supports PDF, TXT, MD, and more</div>
                        <input type="file" id="fileInput" style="display: none;" multiple>
                    </div>

                    <div class="sources-list">
                        <div class="sources-header">
                            <h3 class="sources-title">Uploaded Files (23)</h3>
                        </div>
                        
                        <div class="source-item">
                            <div class="source-info">
                                <div class="file-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14,2 14,8 20,8"/>
                                    </svg>
                                </div>
                                <div class="source-details">
                                    <h4>podman-documentation.pdf</h4>
                                    <div class="source-meta">2.4 MB • Uploaded 2 days ago</div>
                                </div>
                            </div>
                            <div class="source-actions">
                                <button class="source-action" title="Download">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                </button>
                                <button class="source-action delete" title="Delete">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="3,6 5,6 21,6"/>
                                        <path d="M19,6v14a2,2 0,0,1-2,2H7a2,2 0,0,1-2-2V6m3,0V4a2,2 0,0,1,2-2h4a2,2 0,0,1,2,2v2"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <div class="source-item">
                            <div class="source-info">
                                <div class="file-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14,2 14,8 20,8"/>
                                    </svg>
                                </div>
                                <div class="source-details">
                                    <h4>getting-started.md</h4>
                                    <div class="source-meta">124 KB • Uploaded 3 days ago</div>
                                </div>
                            </div>
                            <div class="source-actions">
                                <button class="source-action" title="Download">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                </button>
                                <button class="source-action delete" title="Delete">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="3,6 5,6 21,6"/>
                                        <path d="M19,6v14a2,2 0,0,1-2,2H7a2,2 0,0,1-2-2V6m3,0V4a2,2 0,0,1,2-2h4a2,2 0,0,1,2,2v2"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <div class="source-item">
                            <div class="source-info">
                                <div class="file-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                        <polyline points="14,2 14,8 20,8"/>
                                    </svg>
                                </div>
                                <div class="source-details">
                                    <h4>api-reference.txt</h4>
                                    <div class="source-meta">856 KB • Uploaded 1 week ago</div>
                                </div>
                            </div>
                            <div class="source-actions">
                                <button class="source-action" title="Download">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                        <polyline points="7 10 12 15 17 10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                </button>
                                <button class="source-action delete" title="Delete">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <polyline points="3,6 5,6 21,6"/>
                                        <path d="M19,6v14a2,2 0,0,1-2,2H7a2,2 0,0,1-2-2V6m3,0V4a2,2 0,0,1,2-2h4a2,2 0,0,1,2,2v2"/>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: VectorStore -->
                <div id="vectorstoreTab" class="tab-content">
                    <div class="info-card">
                        <h3 class="info-card-title">Milvus Configuration</h3>
                        <div class="info-row">
                            <span class="info-label">Database Type</span>
                            <span class="info-value">Milvus</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Collection Name</span>
                            <span class="info-value">podman_knowledges</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Vector Dimension</span>
                            <span class="info-value">768</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Index Type</span>
                            <span class="info-value">IVF_FLAT</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Metric Type</span>
                            <span class="info-value">L2</span>
                        </div>
                    </div>
                </div>

                <!-- Tab Content: Chunker -->
                <div id="chunkerTab" class="tab-content">
                    <div class="info-card">
                        <h3 class="info-card-title">Docling Configuration</h3>
                        <div class="info-row">
                            <span class="info-label">Model</span>
                            <span class="info-value">Docling</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Chunk Size</span>
                            <span class="info-value">512 tokens</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Chunk Overlap</span>
                            <span class="info-value">50 tokens</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Embedding Dimension</span>
                            <span class="info-value">768</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        function showTab(tabName) {
            // Remove active from all tabs and content
            document.querySelectorAll('.details-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Add active to selected tab and content
            const targetTab = document.querySelector(`.details-tab[onclick*="${tabName}"]`);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            const targetContent = document.getElementById(tabName + 'Tab');
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }

        // Get environment name from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const envName = urlParams.get('env') || 'podman-knowledges';
        
        // You can add logic here to load specific environment data based on envName
        console.log('Loading environment:', envName);
    </script>
</body>
</html>

